---
- hosts: drupalbox
  vars:
    hostname: drupalbox
    rvm1_user: vagrant
    rvm1_install_path: /home/vagrant/.rvm
    php_xdebug_enabled: true
    php_ini_sendmail_path: "/usr/local/bin/mhsendmail"
    solr_cores:
      - name: drupal7
        module: search_api_solr-7.x-1.12
        subdir: solr-conf/4.x
      - name: drupal8
        module: search_api_solr-8.x-1.2
        subdir: solr-conf/4.x
  vars_files:
    - vars/default/common.yml
    - vars/dev/mysql.yml
    - vars/dev/apache.yml
    - vars/dev/php.yml
  roles:
    - { role: init }
    - { role: common }
    - { role: openssh }
    - { role: git }
    - {
        role: rvm1_io.ruby,
        tags: ruby,
        become: yes
      }
    - { role: memcached }
    - { role: mailhog }
    - {
        role: geerlingguy.java,
        become: yes
      }
    - {
        role: geerlingguy.solr,
        solr_version: "4.5.1",
        become: yes
      }
    - {
        role: geerlingguy.solr-cleanup,
        become: yes
      }
    - { role: apache }
    - { role: mysql-client }
    - { role: mysql-server }
    - { role: php7 }
    - { role: composer }
    - { role: phpmyadmin }
    - { role: nodejs }
    - { role: phantomjs }
    - { role: duplicity }
    - { role: drupalbox }
